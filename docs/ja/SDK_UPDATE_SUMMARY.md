# SDK更新概要

## 📋 クイック概要

**バージョン:** 1.0 → 2.0  
**日付:** 2025-12-05

---

## 🔄 変更リスト

### 1️⃣ 新規フィールド

| フィールド | 型 | 説明 |
|-----------|-----|------|
| heartRatePPI | int | 心拍PPI |
| riskStatus | int | リスクステータス |
| extraData | byte[] | 拡張データ |

### 2️⃣ バグ修正

✅ **心拍PPIバイト順修正**
- ビッグエンディアンからリトルエンディアンに変更
- 例: `20030000` → 800

✅ **動的プロトコル長対応**
- 4/8/9バイトプロトコルを自動認識
- 完全な後方互換性

### 3️⃣ UI最適化

📱 **表示方法の改善**
- Toast → AlertDialog
- より良い可読性

---

## 📊 プロトコル比較

| バージョン | 長さ | フィールド |
|-----------|------|-----------|
| 旧版 | 4 bytes | 基本3フィールド |
| 現在 | 9 bytes | 基本+PPI+リスク |
| 将来 | 10+ bytes | 全て+拡張 |

---

## 🔧 影響を受けるファイル

### SDKコア
- ✏️ `TempCheckModel.java` - データモデル
- ✏️ `ReceiveData.java` - データ解析

### デモアプリ
- ✏️ `MainActivity.java` - UI表示

---

## ⚠️ 重要事項

1. **互換性：** 完全な後方互換性、旧デバイスのアップグレード不要
2. **バイト順：** 心拍PPIはリトルエンディアンを使用
3. **デフォルト値：** 新規フィールドは旧プロトコルで0またはnullがデフォルト

---

## 📝 コード例

```java
// 温度データを取得
TempCheckModel model = event.getTempCheck();

// ✨ 新規フィールド使用
int heartRatePPI = model.getHeartRatePPI();      // 心拍PPI
String riskText = model.getRiskStatusText();     // "正常"
byte[] extra = model.getExtraData();             // 拡張データ
```

---

## ✅ テスト

| テスト項目 | ステータス |
|-----------|-----------|
| 旧プロトコル | ✅ 合格 |
| 新プロトコル | ✅ 合格 |
| UI表示 | ✅ 合格 |
| バイト順 | ✅ 合格 |

---

📅 **更新日:** 2025-12-05  
📦 **ドキュメントバージョン:** 1.0

